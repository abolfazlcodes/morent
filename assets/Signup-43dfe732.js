import{u as b,b as v,c as x,r as S,j as e,B as P,s as f,d as L,H as N}from"./index-2e3bcb71.js";import{L as F}from"./LinkButton-bb3202f8.js";import{u as C,s as q,a as E,F as I,I as n,S as $}from"./SpinnerMini-cd925f92.js";import{F as o}from"./FormRowVertical-1126e504.js";import"./supabase-1ea59f02.js";function k(){const r=b(),t=v(),{isLoading:l,mutate:d}=C({mutationFn:s=>q(s),onSuccess:s=>{var i,a;x.success(`Welcome aboard ${(a=(i=s.user)==null?void 0:i.user_metadata)==null?void 0:a.fullName}`),r.setQueryData(["user"],s.user),t("/",{replace:!0})},onError:s=>{console.log(s),x.error("Something went wrong. Please try again")}});return{isLoading:l,signup:d}}function z(){var u,c,p,g,h;const{formState:{errors:r},register:t,reset:l,handleSubmit:d,setFocus:s,getValues:i}=E(),{isLoading:a,signup:j}=k(),y=m=>{j(m),l()};return S.useEffect(()=>{s("firstName")},[s]),e.jsxs(I,{type:"regular",onSubmit:d(y),children:[e.jsx(o,{label:"First name",error:(u=r.firstName)==null?void 0:u.message,children:e.jsx(n,{type:"text",id:"firstName",autoComplete:"firstName",placeholder:"John",...t("firstName",{required:"Please enter your first name",minLength:{value:2,message:"It should at least contain two characters"}}),disabled:a})}),e.jsx(o,{label:"Last name",error:(c=r.lastName)==null?void 0:c.message,children:e.jsx(n,{type:"text",id:"lastName",autoComplete:"lastName",placeholder:"Doe",...t("lastName",{required:"Please enter your last name",minLength:{value:2,message:"It should at least contain two characters"}}),disabled:a})}),e.jsx(o,{label:"Email address",error:(p=r.email)==null?void 0:p.message,children:e.jsx(n,{type:"email",id:"email",placeholder:"john@doe.com",...t("email",{required:"Please provide your email address",pattern:{value:/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/g,message:"Incorrect email format. Please enter a valid email address"}}),disabled:a})}),e.jsx(o,{label:"Password",error:(g=r.password)==null?void 0:g.message,children:e.jsx(n,{type:"password",id:"password",autoComplete:"current-password",placeholder:"Enter your password",...t("password",{required:"Please enter your password",minLength:{value:8,message:"password must be at least 8 characters"},pattern:{value:/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/gm,message:"Password must contain an uppercase letter and a number"}}),disabled:a})}),e.jsx(o,{label:"Confirm password",error:(h=r.confirmPassword)==null?void 0:h.message,children:e.jsx(n,{type:"password",id:"confirmpassword",placeholder:"Repeat your password",...t("confirmPassword",{required:"Please repeat your password",validate:m=>i().password===m||"Passwords need to match"}),disabled:a})}),e.jsx(o,{children:e.jsx(P,{size:"large",variation:"primary",disabled:a,children:a?e.jsx($,{}):"Create new account"})})]})}const A=f.main`
  min-height: 100vh;
  display: grid;
  grid-template-columns: 48rem;
  align-content: center;
  justify-content: center;
  gap: 3.2rem;
  background-color: var(--color-grey-50);
`,w=f.div`
  text-align: center;
  display: flex;
  flex-direction: column;
  gap: 2rem;
`;function Q(){return e.jsxs(A,{children:[e.jsxs(w,{children:[e.jsx(L,{}),e.jsx(N,{as:"h4",color:"black",children:"Sign up and rent your dream car"})]}),e.jsx(z,{}),e.jsx(w,{children:e.jsx(F,{to:"/login",children:"Already have an account? Log in"})})]})}export{Q as default};
